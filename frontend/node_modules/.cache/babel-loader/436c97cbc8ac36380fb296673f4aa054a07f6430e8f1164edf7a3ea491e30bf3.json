{"ast":null,"code":"var _jsxFileName = \"/Users/zhirong/Desktop/test1/frontend/src/SideBar.js\";\nimport React, { Children, Component } from 'react';\nimport VenueList from './VenueList';\nimport ListItem from './ListItem';\nimport './SideBar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass SideBar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      venues: [],\n      selectedMarker: null // If selectedMarker is a state in SideBar\n    };\n  }\n  componentDidMount() {\n    fetch('/toilets').then(response => response.json()).then(data => {\n      const fetchCommentsPromises = data.map(toilet => {\n        return fetch(`/comments/${toilet.popUp}`).then(response => response.json()).then(comments => {\n          // Add the comments to the toilet\n          toilet.comments = comments;\n          return toilet;\n        });\n      });\n\n      // Wait for all comments to be fetched\n      Promise.all(fetchCommentsPromises).then(venuesWithComments => {\n        this.setState({\n          venues: venuesWithComments\n        });\n      });\n    });\n  }\n  render() {\n    const {\n      selectedMarker,\n      venues\n    } = this.state;\n    const selectedVenue = selectedMarker ? venues.find(venue => venue.popUp === selectedMarker.popUp) : null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SideBar\",\n      children: [selectedMarker && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-venue\",\n        children: /*#__PURE__*/_jsxDEV(ListItem, {\n          popUp: selectedMarker.popUp,\n          description: selectedMarker.description,\n          averageRating: selectedMarker.average_rating // Changed rating to averageRating\n          ,\n          comments: selectedVenue.comments\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(VenueList, {\n        className: \"venue-list\",\n        selectedMarker: selectedMarker,\n        venues: venues\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this), Children.toArray(this.props.children)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this);\n  }\n}\nexport default SideBar;","map":{"version":3,"names":["React","Children","Component","VenueList","ListItem","jsxDEV","_jsxDEV","SideBar","constructor","args","state","venues","selectedMarker","componentDidMount","fetch","then","response","json","data","fetchCommentsPromises","map","toilet","popUp","comments","Promise","all","venuesWithComments","setState","render","selectedVenue","find","venue","className","children","description","averageRating","average_rating","fileName","_jsxFileName","lineNumber","columnNumber","toArray","props"],"sources":["/Users/zhirong/Desktop/test1/frontend/src/SideBar.js"],"sourcesContent":["import React, { Children, Component } from 'react'\nimport VenueList from './VenueList'\nimport ListItem from './ListItem'\nimport './SideBar.css'\n\nclass SideBar extends Component {\n    state = {\n      venues: [],\n      selectedMarker: null,  // If selectedMarker is a state in SideBar\n    };\n  \n    componentDidMount() {\n        fetch('/toilets')\n          .then(response => response.json())\n          .then(data => {\n            const fetchCommentsPromises = data.map(toilet => {\n              return fetch(`/comments/${toilet.popUp}`)\n                .then(response => response.json())\n                .then(comments => {\n                  // Add the comments to the toilet\n                  toilet.comments = comments;\n                  return toilet;\n                });\n            });\n      \n            // Wait for all comments to be fetched\n            Promise.all(fetchCommentsPromises)\n              .then(venuesWithComments => {\n                this.setState({ venues: venuesWithComments });\n              });\n          });\n      }\n  \n    render() {\n      const { selectedMarker, venues } = this.state;\n      const selectedVenue = selectedMarker ? venues.find(venue => venue.popUp === selectedMarker.popUp) : null;\n  \n      return (\n        <div className=\"SideBar\">\n          {selectedMarker && (\n            <div className=\"selected-venue\">\n                <ListItem \n                popUp={selectedMarker.popUp} \n                description={selectedMarker.description} \n                averageRating={selectedMarker.average_rating}  // Changed rating to averageRating\n                comments={selectedVenue.comments} \n                />\n            </div>\n            )}\n          <VenueList className=\"venue-list\" selectedMarker={selectedMarker} venues={venues} />\n          {Children.toArray(this.props.children)}\n        </div>\n      );\n    }\n  }\n\nexport default SideBar"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAO,eAAe;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEtB,MAAMC,OAAO,SAASL,SAAS,CAAC;EAAAM,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KAC5BC,KAAK,GAAG;MACNC,MAAM,EAAE,EAAE;MACVC,cAAc,EAAE,IAAI,CAAG;IACzB,CAAC;EAAA;EAEDC,iBAAiBA,CAAA,EAAG;IAChBC,KAAK,CAAC,UAAU,CAAC,CACdC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;MACZ,MAAMC,qBAAqB,GAAGD,IAAI,CAACE,GAAG,CAACC,MAAM,IAAI;QAC/C,OAAOP,KAAK,CAAC,aAAaO,MAAM,CAACC,KAAK,EAAE,CAAC,CACtCP,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACQ,QAAQ,IAAI;UAChB;UACAF,MAAM,CAACE,QAAQ,GAAGA,QAAQ;UAC1B,OAAOF,MAAM;QACf,CAAC,CAAC;MACN,CAAC,CAAC;;MAEF;MACAG,OAAO,CAACC,GAAG,CAACN,qBAAqB,CAAC,CAC/BJ,IAAI,CAACW,kBAAkB,IAAI;QAC1B,IAAI,CAACC,QAAQ,CAAC;UAAEhB,MAAM,EAAEe;QAAmB,CAAC,CAAC;MAC/C,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEFE,MAAMA,CAAA,EAAG;IACP,MAAM;MAAEhB,cAAc;MAAED;IAAO,CAAC,GAAG,IAAI,CAACD,KAAK;IAC7C,MAAMmB,aAAa,GAAGjB,cAAc,GAAGD,MAAM,CAACmB,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACT,KAAK,KAAKV,cAAc,CAACU,KAAK,CAAC,GAAG,IAAI;IAExG,oBACEhB,OAAA;MAAK0B,SAAS,EAAC,SAAS;MAAAC,QAAA,GACrBrB,cAAc,iBACbN,OAAA;QAAK0B,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC3B3B,OAAA,CAACF,QAAQ;UACTkB,KAAK,EAAEV,cAAc,CAACU,KAAM;UAC5BY,WAAW,EAAEtB,cAAc,CAACsB,WAAY;UACxCC,aAAa,EAAEvB,cAAc,CAACwB,cAAe,CAAE;UAAA;UAC/Cb,QAAQ,EAAEM,aAAa,CAACN;QAAS;UAAAc,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CACJ,eACHlC,OAAA,CAACH,SAAS;QAAC6B,SAAS,EAAC,YAAY;QAACpB,cAAc,EAAEA,cAAe;QAACD,MAAM,EAAEA;MAAO;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACnFvC,QAAQ,CAACwC,OAAO,CAAC,IAAI,CAACC,KAAK,CAACT,QAAQ,CAAC;IAAA;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnC,CAAC;EAEV;AACF;AAEF,eAAejC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}